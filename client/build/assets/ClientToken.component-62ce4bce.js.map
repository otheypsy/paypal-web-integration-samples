{"version":3,"file":"ClientToken.component-62ce4bce.js","sources":["../../src/app/braintree/pages/client/BTClientInstance/sections/ClientToken.component.jsx"],"sourcesContent":["import createLoggers from '../../../../../../utils/logger.utils.jsx'\nimport withOperations from '../../../../../../layouts/withOperations.hoc.jsx'\nimport { clientInterface, serverInterface } from '../../../../../../services/bt.service.jsx'\nimport { useAddBusy, useRemoveBusy } from '../../../../../../states/Busy/busy.hooks.jsx'\nimport { useSetError } from '../../../../../../states/Error/error.hooks.jsx'\nimport { useAddAppContext } from '../../../../../../states/AppContext/appContext.hooks.jsx'\nimport { useAddOutput } from '../../../../../../states/Output/output.hooks.jsx'\n\nconst { log, error } = createLoggers('ClientToken.component.jsx')\n\nconst _operations = {\n    createClientToken: {\n        label: 'gateway.clientToken.generate()',\n        type: 'server',\n        data: {\n            parameters: {\n                // customerId: '839327792',\n                merchantAccountId: 'odesai_USD',\n            },\n        },\n    },\n    createClientInstance: {\n        label: 'braintree-web.client.create()',\n        type: 'client',\n        data: {\n            options: {\n                authorization: 'CLIENT_TOKEN_HERE',\n            },\n        },\n    },\n}\n\nconst ClientToken = (props) => {\n    const addBusy = useAddBusy()\n    const removeBusy = useRemoveBusy()\n    const addOutput = useAddOutput()\n    const setError = useSetError()\n    const addAppContext = useAddAppContext()\n\n    const createClientToken = async () => {\n        addBusy()\n        try {\n            const response = await serverInterface(\n                'clientToken',\n                'generate',\n                [],\n                props.operations.createClientToken.data.parameters,\n            )\n            log('createClientToken', response)\n            addOutput('ClientToken', response)\n            if (!response?.clientToken) throw Error('Response does not contain client token')\n            const newData = props.operations.createClientInstance.data\n            newData.options.authorization = response.clientToken\n            props.updateOperation('createClientInstance', newData)\n        } catch (e) {\n            setError()\n            error(e)\n        }\n        removeBusy()\n    }\n\n    const createClientInstance = async () => {\n        addBusy()\n        try {\n            const clientInstance = await clientInterface('Client', props.operations.createClientInstance.data.options)\n            log('createClientInstance', clientInstance)\n            addOutput('ClientInstance', clientInstance)\n            if (clientInstance) addAppContext('clientInstance', clientInstance)\n        } catch (e) {\n            setError()\n            error(e)\n        }\n        removeBusy()\n    }\n\n    return (\n        <>\n            <button className=\"btn btn-outline-success\" onClick={createClientToken}>\n                Create Client Token\n            </button>\n            <br />\n            <br />\n            <button className=\"btn btn-outline-success\" onClick={createClientInstance}>\n                Create Client Instance\n            </button>\n        </>\n    )\n}\n\nexport default withOperations(ClientToken, _operations)\n"],"names":["log","error","createLoggers","_operations","ClientToken","props","addBusy","useAddBusy","removeBusy","useRemoveBusy","addOutput","useAddOutput","setError","useSetError","addAppContext","useAddAppContext","jsxs","Fragment","jsx","response","serverInterface","newData","clientInstance","clientInterface","ClientToken_component","withOperations"],"mappings":"uTAQA,KAAM,CAAE,IAAAA,EAAK,MAAAC,CAAM,EAAIC,EAAc,2BAA2B,EAE1DC,EAAc,CAChB,kBAAmB,CACf,MAAO,iCACP,KAAM,SACN,KAAM,CACF,WAAY,CAER,kBAAmB,YACvB,CACJ,CACJ,EACA,qBAAsB,CAClB,MAAO,gCACP,KAAM,SACN,KAAM,CACF,QAAS,CACL,cAAe,mBACnB,CACJ,CACJ,CACJ,EAEMC,EAAeC,GAAU,CAC3B,MAAMC,EAAUC,IACVC,EAAaC,IACbC,EAAYC,IACZC,EAAWC,IACXC,EAAgBC,IAsCtB,OAEQC,EAAAC,EAAA,CAAA,SAAA,CAAAC,EAAC,SAAO,CAAA,UAAU,0BAA0B,QAtC1B,SAAY,CAC1BZ,IACJ,GAAA,CACA,MAAMa,EAAW,MAAMC,EACnB,cACA,WACA,CAAC,EACDf,EAAM,WAAW,kBAAkB,KAAK,UAAA,EAI5C,GAFAL,EAAI,oBAAqBmB,CAAQ,EACjCT,EAAU,cAAeS,CAAQ,EAC7B,CAACA,GAAU,YAAa,MAAM,MAAM,wCAAwC,EAC1E,MAAAE,EAAUhB,EAAM,WAAW,qBAAqB,KAC9CgB,EAAA,QAAQ,cAAgBF,EAAS,YACnCd,EAAA,gBAAgB,uBAAwBgB,CAAO,QAChD,GACIT,IACTX,EAAM,CAAC,CACX,CACWO,GAAA,EAmBiE,SAExE,sBAAA,IACC,KAAG,EAAA,IACH,KAAG,EAAA,IACH,SAAO,CAAA,UAAU,0BAA0B,QArBvB,SAAY,CAC7BF,IACJ,GAAA,CACM,MAAAgB,EAAiB,MAAMC,EAAgB,SAAUlB,EAAM,WAAW,qBAAqB,KAAK,OAAO,EACzGL,EAAI,uBAAwBsB,CAAc,EAC1CZ,EAAU,iBAAkBY,CAAc,EACtCA,GAAgBR,EAAc,iBAAkBQ,CAAc,QAC7D,GACIV,IACTX,EAAM,CAAC,CACX,CACWO,GAAA,EAUoE,SAE3E,yBAAA,CACJ,CAAA,CAAA,CAER,EAEAgB,EAAeC,EAAerB,EAAaD,CAAW"}