{"version":3,"file":"ClientToken.component-b1a77cb4.js","sources":["../../src/integrations/apps/braintree/pages/client/BTClientInstance/sections/ClientToken.component.jsx"],"sourcesContent":["import PropTypes from 'prop-types'\nimport { useState } from 'react'\nimport withSDKOperations from '../../../../layouts/withSDKOperations'\nimport createLoggers from '../../../../../../../utils/logger.utils.jsx'\nimport { clientInterface, serverInterface } from '../../../../services/BraintreeInterface'\nimport { useAddBusy, useRemoveBusy } from '../../../../../../states/Busy/BusyHooks'\nimport { useSetError } from '../../../../../../states/Error/ErrorHooks'\nimport { useAddAppContext } from '../../../../../../states/AppContext/AppContextHooks'\nimport { useAddOutput } from '../../../../../../states/Output/OutputHooks'\n\nconst { log, error } = createLoggers('ClientToken.component.jsx')\n\nconst _operations = {\n    clientTokenGenerate: {\n        label: 'gateway.clientToken.generate()',\n        type: 'server',\n        data: {\n            parameters: {\n                // customerId: '839327792',\n                merchantAccountId: 'paypal',\n            },\n        },\n    },\n    clientCreate: {\n        label: 'braintree-web.client.create()',\n        type: 'client',\n        data: {\n            options: {\n                authorization: 'CLIENT_TOKEN_HERE',\n            },\n        },\n    },\n}\n\nconst ClientToken = (props) => {\n    const addBusy = useAddBusy()\n    const removeBusy = useRemoveBusy()\n    const addOutput = useAddOutput()\n    const setError = useSetError()\n    const addAppContext = useAddAppContext()\n\n    const [clientToken, setClientToken] = useState('')\n\n    const createClientToken = async () => {\n        addBusy()\n        try {\n            const response = await serverInterface(\n                'clientToken',\n                'generate',\n                [],\n                props.operations.clientTokenGenerate.data.parameters,\n            )\n            log('createClientToken', response)\n            addOutput('ClientToken', response)\n            if (!response?.clientToken) throw Error('Response does not contain client token')\n            setClientToken(response.clientToken)\n        } catch (e) {\n            setError()\n            error(e)\n        }\n        removeBusy()\n    }\n\n    const createClientInstance = async () => {\n        addBusy()\n        try {\n            const clientInstance = await clientInterface('Client', {\n                ...props.operations.clientCreate.data.options,\n                authorization: clientToken,\n            })\n            log('createClientInstance', clientInstance)\n            addOutput('ClientInstance', clientInstance)\n            if (clientInstance) addAppContext('clientInstance', clientInstance)\n        } catch (e) {\n            setError()\n            error(e)\n        }\n        removeBusy()\n    }\n\n    return (\n        <>\n            <button className=\"btn btn-outline-success\" onClick={createClientToken}>\n                Create Client Token\n            </button>\n            <br />\n            <br />\n            <button className=\"btn btn-outline-success\" onClick={createClientInstance}>\n                Create Client Instance\n            </button>\n        </>\n    )\n}\n\nClientToken.propTypes = {\n    operations: PropTypes.object,\n}\n\nexport default withSDKOperations(ClientToken, _operations)\n"],"names":["log","error","createLoggers","_operations","ClientToken","props","addBusy","useAddBusy","removeBusy","useRemoveBusy","addOutput","useAddOutput","setError","useSetError","addAppContext","useAddAppContext","clientToken","setClientToken","useState","jsxs","Fragment","jsx","response","serverInterface","clientInstance","clientInterface","PropTypes","ClientToken_component","withSDKOperations"],"mappings":"mTAUA,KAAM,CAAE,IAAAA,EAAK,MAAAC,CAAM,EAAIC,EAAc,2BAA2B,EAE1DC,EAAc,CAChB,oBAAqB,CACjB,MAAO,iCACP,KAAM,SACN,KAAM,CACF,WAAY,CAER,kBAAmB,QACvB,CACJ,CACJ,EACA,aAAc,CACV,MAAO,gCACP,KAAM,SACN,KAAM,CACF,QAAS,CACL,cAAe,mBACnB,CACJ,CACJ,CACJ,EAEMC,EAAeC,GAAU,CAC3B,MAAMC,EAAUC,IACVC,EAAaC,IACbC,EAAYC,IACZC,EAAWC,IACXC,EAAgBC,IAEhB,CAACC,EAAaC,CAAc,EAAIC,WAAS,EAAE,EAuCjD,OAEQC,EAAAC,EAAA,CAAA,SAAA,CAAAC,EAAC,SAAO,CAAA,UAAU,0BAA0B,QAvC1B,SAAY,CAC1Bf,IACJ,GAAA,CACA,MAAMgB,EAAW,MAAMC,EACnB,cACA,WACA,CAAC,EACDlB,EAAM,WAAW,oBAAoB,KAAK,UAAA,EAI9C,GAFAL,EAAI,oBAAqBsB,CAAQ,EACjCZ,EAAU,cAAeY,CAAQ,EAC7B,CAACA,GAAU,YAAa,MAAM,MAAM,wCAAwC,EAChFL,EAAeK,EAAS,WAAW,QAC9B,GACIV,IACTX,EAAM,CAAC,CACX,CACWO,GAAA,EAsBiE,SAExE,sBAAA,IACC,KAAG,EAAA,IACH,KAAG,EAAA,IACH,SAAO,CAAA,UAAU,0BAA0B,QAxBvB,SAAY,CAC7BF,IACJ,GAAA,CACM,MAAAkB,EAAiB,MAAMC,EAAgB,SAAU,CACnD,GAAGpB,EAAM,WAAW,aAAa,KAAK,QACtC,cAAeW,CAAA,CAClB,EACDhB,EAAI,uBAAwBwB,CAAc,EAC1Cd,EAAU,iBAAkBc,CAAc,EACtCA,GAAgBV,EAAc,iBAAkBU,CAAc,QAC7D,GACIZ,IACTX,EAAM,CAAC,CACX,CACWO,GAAA,EAUoE,SAE3E,yBAAA,CACJ,CAAA,CAAA,CAER,EAEAJ,EAAY,UAAY,CACpB,WAAYsB,EAAU,MAC1B,EAEA,MAAAC,EAAeC,EAAkBxB,EAAaD,CAAW"}