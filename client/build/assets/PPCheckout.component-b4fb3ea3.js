import{j as i,u as v,b as S,c as C,a as w,F as B}from"./index-5183357d.js";import{r as p,P}from"./vendor-d2c1d7ba.js";import{w as E}from"./withOperations.hoc-a1e834ab.js";import{c as g}from"./logger.utils-ababba19.js";import{j as k}from"./http.utils-2a9b74b8.js";import"./InputText.component-62651ba0.js";const O=(t,r={},n={})=>new Promise((e,a)=>{const o=document.createElement("script"),l=new URL(t);for(const c in r)l.searchParams.append(c,r[c]);for(const c in n)o.setAttribute(c,n[c]);const u=()=>{e(o),o.removeEventListener("error",s),o.removeEventListener("load",u)},s=c=>{a(c),o.removeEventListener("error",s),o.removeEventListener("load",u)};o.src=l.href,o.async=!0,document.body.appendChild(o),o.addEventListener("load",u),o.addEventListener("error",s)}),L=async(t={},r={})=>{const n={components:"buttons,funding-eligibility","client-id":"test","disable-funding":"card",...t};return await O("https://www.paypal.com/sdk/js",n,r)},A=async(t,r,n={},e={})=>{const a="/api/paypal/rest/interface",o=localStorage.getItem("authHeader")?{authorization:"Basic "+localStorage.getItem("authHeader")}:{};return await k(a,r,{uri:t,headers:e,body:n},o)},{log:d,error:f,warn:D}=g("PayPalButtons.component.js"),b=t=>{const r=p.useRef(),n=p.useMemo(()=>({style:{color:"black",layout:"vertical",shape:"rect",label:"paypal",tagline:"false"},onClick:(e,a)=>d("PayPalButtons: onClick",{data:e,actions:a}),onInit:(e,a)=>d("PayPalButtons: onInit",{data:e,actions:a}),createOrder:(e,a)=>d("PayPalButtons: createOrder",{data:e,actions:a}),onApprove:(e,a)=>d("PayPalButtons: onApprove",{data:e,actions:a}),onCancel:e=>f("PayPalButtons: onCancel",e),onError:e=>f("PayPalButtons: onError",e),...t.ppConfig}),[t.ppConfig]);return p.useEffect(()=>{const e=r.current;return n&&(async()=>{const o=t.fundingSources||window.paypal.getFundingSources();d(t.fundingSources);for(const l of o){const u=window.paypal.Buttons({...n,fundingSource:l});try{u.isEligible()&&e&&await u.render(e)}catch(s){D("PayPalButtons",s.message)}}})(),()=>{window.paypal.Buttons.instances.forEach(o=>o.close()),e.innerHTML=null}},[n,t.fundingSources]),i("div",{ref:r})},h=t=>t.ppConfig&&window?.paypal?.Buttons?i(b,{ppConfig:t.ppConfig,fundingSources:t.fundingSources}):null;b.propTypes=h.propTypes={ppConfig:P.object,fundingSources:P.array};const{log:m,error:y}=g("PPCheckout.component.jsx"),j={loadPayPalSDK:{label:"Load PayPal JS SDK",type:"client",data:{options:{},dataAttributes:{}}},createOrder:{label:"Create Order",type:"server",data:{uri:"v2/checkout/orders",method:"POST",body:{intent:"CAPTURE",purchase_units:[{invoice_id:"INV-"+Math.round(new Date().getTime()/1e3),amount:{currency_code:"USD",value:"220.00"}}]}}},onApprove:{label:"Execute Order",type:"server",data:{uri:"v2/checkout/orders",method:"POST",body:{}}}},T=t=>{const r=v(),n=S(),e=C(),[a,o]=p.useState(void 0),l=async()=>{r();const{options:s,dataAttributes:c}=t.operations.loadPayPalSDK.data;await L(s,c),n()},u=()=>{if(r(),!window?.paypal?.Buttons)return y("renderPayPalButtons","Unable to load PayPal Checkout SDK");o({createOrder:async()=>{r();let s;try{s=await A(t.operations.createOrder.data.uri,t.operations.createOrder.data.method,t.operations.createOrder.data.body),m("createOrder",s)}catch(c){e(),y("createOrder",c)}return n(),s?.id},onApprove:async s=>{r();try{m("onApprove",s)}catch(c){e(),y("onApprove",c)}n()}}),n()};return w(B,{children:[i("button",{className:"btn btn-outline-success",onClick:l,children:"Load PayPal JS SDK"}),i("br",{}),i("button",{className:"btn btn-outline-success",onClick:u,children:"Render PayPal Buttons"}),i("br",{}),i("button",{className:"btn btn-outline-success",onClick:u,children:"Execute Order"}),i("br",{}),i("br",{}),i(h,{ppConfig:a,fundingSources:["paypal"]})]})},H=E(T,j);export{H as default};
//# sourceMappingURL=PPCheckout.component-b4fb3ea3.js.map
