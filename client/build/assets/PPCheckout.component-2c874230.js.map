{"version":3,"file":"PPCheckout.component-2c874230.js","sources":["../../src/utils/dom.utils.jsx","../../src/services/paypal.service.jsx","../../src/app/paypal/pages/PPCheckout/PPCheckout.component.jsx"],"sourcesContent":["const loadScript = (url, queryParams = {}, dataAttributes = {}) => {\n    return new Promise((resolve, reject) => {\n        const script = document.createElement('script')\n        const finalUrl = new URL(url)\n\n        for (const key in queryParams) {\n            finalUrl.searchParams.append(key, queryParams[key])\n        }\n\n        for (const key in dataAttributes) {\n            script.setAttribute(key, dataAttributes[key])\n        }\n\n        const onLoad = () => {\n            resolve(script)\n            script.removeEventListener('error', onError)\n            script.removeEventListener('load', onLoad)\n        }\n\n        const onError = (e) => {\n            reject(e)\n            script.removeEventListener('error', onError)\n            script.removeEventListener('load', onLoad)\n        }\n\n        script.src = finalUrl.href\n        script.async = true\n        document.body.appendChild(script)\n\n        script.addEventListener('load', onLoad)\n        script.addEventListener('error', onError)\n    })\n}\n\nexport { loadScript }\n","import { loadScript } from '../utils/dom.utils'\n\nconst loadPPScript = async (options = {}, dataAttributes = {}) => {\n    const queryParams = {\n        components: 'buttons,funding-eligibility',\n        'client-id': 'test',\n        'disable-funding': 'card',\n        ...options,\n    }\n    return await loadScript('https://www.paypal.com/sdk/js', queryParams, dataAttributes)\n}\n\nexport { loadPPScript }\n","import { useState, useRef } from 'react'\nimport withOperations from '../../../../layouts/withOperations.component.jsx'\nimport PayPalOrdersService from '../../services/PayPalOrdersService.jsx'\nimport { Card, OutputJson, BusyIndicator } from '../../../../lib/components/export.jsx'\nimport createLoggers from '../../../../utils/logger.utils.jsx'\nimport { useAddBusy, useRemoveBusy } from '../../../../states/Busy/busy.hooks.jsx'\nimport { useAddOutput } from '../../../../states/Output/output.hooks.jsx'\nimport { useSetError } from '../../../../states/Error/error.hooks.jsx'\nimport { useAddAppContext } from '../../../../states/AppContext/appContext.hooks.jsx'\nimport { loadPPScript } from '../../../../services/paypal.service.jsx'\n\nconst { log, error } = createLoggers('PPCheckout.component.jsx')\n\nconst _operations = {\n    loadPayPalSDK: {\n        label: 'Load PayPal JS SDK',\n        type: 'client',\n        data: {\n            options: {},\n            dataAttributes: {},\n        },\n    },\n    createOrder: {\n        label: 'Create Order',\n        type: 'server',\n        data: {\n            uri: 'v2/checkout/orders',\n            method: 'POST',\n            body: {\n                intent: 'CAPTURE',\n                purchase_units: [\n                    {\n                        invoice_id: 'INV-' + Math.round(new Date().getTime() / 1000),\n                        amount: {\n                            currency_code: 'USD',\n                            value: '220.00',\n                        },\n                    },\n                ],\n            },\n        },\n    },\n    onApprove: {\n        label: 'Execute Order',\n        type: 'server',\n        data: {\n            uri: 'v2/checkout/orders',\n            method: 'POST',\n            body: {},\n        },\n    },\n}\n\nconst PPCheckout = (props) => {\n    const addBusy = useAddBusy()\n    const removeBusy = useRemoveBusy()\n    const addOutput = useAddOutput()\n    const setError = useSetError()\n    const addAppContext = useAddAppContext()\n\n    const ppContainer = useRef(undefined)\n\n    const [order] = useState()\n\n    const renderPayPalButtons = () => {\n        setIsBusy(true)\n        if (!window.hasOwnProperty('PP') || !window.PP.hasOwnProperty('paypal'))\n            return console.error('Unable to load PayPal Checkout SDK - JSV5')\n        window.PP.paypal\n            .Buttons({\n                createOrder: async () => {\n                    setIsBusy(true)\n                    const orderData = await PayPalOrdersService.orders.create(order)\n                    setResponse(orderData)\n                    setIsBusy(false)\n                    return orderData.id\n                },\n\n                onApprove: async (data) => {\n                    setIsBusy(true)\n                    const executeData = await PayPalOrdersService.orders.execute(data.orderID)\n                    setResponse(executeData)\n                    setIsBusy(false)\n                },\n            })\n            .render('#paypalCheckoutDiv')\n            .then(() => {\n                setIsBusy(false)\n            })\n    }\n\n    const loadPayPalSDK = async () => {\n        addBusy()\n        log(props.operations)\n        const { options, dataAttributes } = props.operations.loadPayPalSDK.data\n        await loadPPScript(options, dataAttributes)\n        removeBusy()\n    }\n\n    return (\n        <>\n            <button className=\"btn btn-outline-success\" onClick={loadPayPalSDK}>\n                Load PayPal JS SDK\n            </button>\n            <br />\n            <button className=\"btn btn-outline-success\" onClick={renderPayPalButtons}>\n                Render PayPal Buttons\n            </button>\n            <br />\n            <button className=\"btn btn-outline-success\" onClick={renderPayPalButtons}>\n                Execute Order\n            </button>\n            <div ref={ppContainer} />\n        </>\n    )\n}\n\nexport default withOperations(PPCheckout, _operations)\n"],"names":["loadScript","url","queryParams","dataAttributes","resolve","reject","script","finalUrl","key","onLoad","onError","e","loadPPScript","options","log","error","createLoggers","_operations","PPCheckout","props","addBusy","useAddBusy","removeBusy","useRemoveBusy","addOutput","useAddOutput","setError","useSetError","addAppContext","useAddAppContext","ppContainer","useRef","order","useState","renderPayPalButtons","orderData","PayPalOrdersService","data","executeData","jsxs","Fragment","jsx","PPCheckout_component","withOperations"],"mappings":"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"}